var x={num:{type:"num",match:/(\.e?|\b)\d(e-|[\d.oxa-fA-F_])*(\.|\b)/g},str:{type:"str",match:/(["'])(\\[^]|(?!\1)[^\r\n\\])*\1?/g},strDouble:{type:"str",match:/"((?!")[^\r\n\\]|\\[^])*"?/g}};var c={},m=(t="")=>{var e,n,l,a;return(a=(n=(e=t.replaceAll("&","&#38;")).replaceAll)==null?void 0:(l=n.call(e,"<","&lt;")).replaceAll)==null?void 0:a.call(l,">","&gt;")},o=(t,e)=>e?`<span class="shj-syn-${e}">${t}</span>`:t;async function f(t,e,n){var l;try{let a,s,i={},d,r=[],h=0,u=typeof e=="string"?await((l=c[e])!=null?l:c[e]=import(`./languages/${e}.js`)):e,p=[...typeof e=="string"?u.default:e.sub];for(;h<t.length;){for(i.index=null,a=p.length;a-- >0;){if(s=p[a].expand?x[p[a].expand]:p[a],r[a]===void 0||r[a].match.index<h){if(s.match.lastIndex=h,d=s.match.exec(t),d===null){p.splice(a,1),r.splice(a,1);continue}r[a]={match:d,lastIndex:s.match.lastIndex}}r[a].match[0]&&(r[a].match.index<=i.index||i.index===null)&&(i={part:s,index:r[a].match.index,match:r[a].match[0],end:r[a].lastIndex})}if(i.index===null)break;n(t.slice(h,i.index),u.type),h=i.end,i.part.sub?await f(i.match,typeof i.part.sub=="string"?i.part.sub:typeof i.part.sub=="function"?i.part.sub(i.match):i.part,n):n(i.match,i.part.type)}n(t.slice(h,t.length),u.type)}catch{n(t)}}async function y(t,e,n=!0,l={}){let a="";return await f(t,e,(s,i)=>a+=o(m(s),i)),n?`<div><div class="shj-numbers">${"<div></div>".repeat(!l.hideLineNumbers&&t.split(`
`).length)}</div><div>${a}</div></div>`:a}async function g(t,e=(a=>(a=t.className.match(/shj-lang-([\w-]+)/))==null?void 0:a[1])(),n,l){let s=t.textContent;n!=null||(n=`${t.tagName=="CODE"?"in":s.split(`
`).length<2?"one":"multi"}line`),t.dataset.lang=e,t.className=`${[...t.classList].filter(i=>!i.startsWith("shj-")).join(" ")} shj-lang-${e} shj-${n}`,t.innerHTML=await y(s,e,n=="multiline",l)}var $=async t=>Promise.all(Array.from(document.querySelectorAll('[class*="shj-lang-"]')).map(e=>g(e,void 0,void 0,t))),v=(t,e)=>{c[t]=e};export{$ as highlightAll,g as highlightElement,y as highlightText,v as loadLanguage,f as tokenize};
